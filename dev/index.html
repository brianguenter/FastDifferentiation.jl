<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · FastDifferentiation.jl</title><meta name="title" content="Introduction · FastDifferentiation.jl"/><meta property="og:title" content="Introduction · FastDifferentiation.jl"/><meta property="twitter:title" content="Introduction · FastDifferentiation.jl"/><meta name="description" content="Documentation for FastDifferentiation.jl."/><meta property="og:description" content="Documentation for FastDifferentiation.jl."/><meta property="twitter:description" content="Documentation for FastDifferentiation.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>FastDifferentiation.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Notes-about-special-derivatives"><span>Notes about special derivatives</span></a></li><li><a class="tocitem" href="#Conditionals"><span>Conditionals</span></a></li></ul></li><li><a class="tocitem" href="limitations/">Limitations</a></li><li><a class="tocitem" href="howitworks/">How it works</a></li><li><a class="tocitem" href="examples/">Examples</a></li><li><a class="tocitem" href="makefunction/">How to use make_function</a></li><li><a class="tocitem" href="benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="symbolicprocessing/">Symbolic processing</a></li><li><a class="tocitem" href="futurework/">Future work</a></li><li><a class="tocitem" href="api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brianguenter/FastDifferentiation.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brianguenter/FastDifferentiation.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p><a href="https://github.com/brianguenter/FastDifferentiation.jl/actions/workflows/CI.yml?query=branch%3Amain"><img src="https://github.com/brianguenter/FastDifferentiation.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status"/></a></p><p>FastDifferentiation (<strong>FD</strong>) is a package for generating efficient executables to evaluate derivatives of Julia functions. It can also generate efficient true symbolic derivatives for symbolic analysis. Unlike forward and reverse mode automatic differentiation <strong>FD</strong> automatically generates efficient derivatives for arbitrary function types: ℝ¹-&gt;ℝ¹, ℝ¹-&gt;ℝᵐ, ℝⁿ-&gt;ℝ¹, and ℝⁿ-&gt;ℝᵐ. </p><p>For f:ℝⁿ-&gt;ℝᵐ with n,m large <strong>FD</strong> may have better performance than conventional AD algorithms because the <strong>FD</strong> algorithm finds expressions shared between partials and computes them only once. In some cases <strong>FD</strong> derivatives can be as efficient as manually coded derivatives (see the Lagrangian dynamics example in the <a href="https://www.microsoft.com/en-us/research/publication/the-d-symbolic-differentiation-algorithm/">D*</a> paper or the <a href="benchmarks/#Benchmarks">Benchmarks</a> section of the documentation for another example).</p><p><strong>FD</strong> may take much less time to compute symbolic derivatives than Symbolics.jl even in the ℝ¹-&gt;ℝ¹ case. The executables generated by <strong>FD</strong> may also be much faster (see <a href="symbolicprocessing/#Symbolic-Processing">Symbolic Processing</a>). </p><p>You should consider using FastDifferentiation when you need: </p><ul><li>a fast executable for evaluating the derivative of a function and the overhead of the preprocessing/compilation time is swamped by evaluation time.</li><li>to do additional symbolic processing on your derivative. <strong>FD</strong> can generate a true symbolic derivative to be processed further in Symbolics.jl or another computer algebra system.</li></ul><p>This is the <strong>FD</strong> feature set:</p><table><tr><th style="text-align: right"></th><th style="text-align: right">Dense Jacobian</th><th style="text-align: right">Sparse Jacobian</th><th style="text-align: right">Dense Hessian</th><th style="text-align: right">Sparse Hessian</th><th style="text-align: right">Higher order derivatives</th><th style="text-align: right">Jᵀv</th><th style="text-align: right">Hv</th></tr><tr><td style="text-align: right">Compiled function</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right">Symbolic expression</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td><td style="text-align: right">✅</td></tr></table><p>Jᵀv and Jv compute the Jacobian transpose times a vector and the Jacobian times a vector, without explicitly forming the Jacobian matrix. For applications see this <a href="https://arxiv.org/abs/1812.01892">paper</a>. </p><p>Hv computes the Hessian times a vector without explicitly forming the Hessian matrix. This can be useful when the Hessian matrix is large and sparse.</p><p>If you use FD in your work please share the functions you differentiate with me. I&#39;ll add them to the benchmarks. The more functions available to test the easier it is for others to determine if FD will help with their problem.</p><p>This is <strong>beta</strong> software being modified on a daily basis. Expect bugs and frequent, possibly breaking changes, over the next month or so. Documentation is frequently updated so check the latest docs before filing an issue. Your problem may have been fixed and documented.</p><h2 id="Notes-about-special-derivatives"><a class="docs-heading-anchor" href="#Notes-about-special-derivatives">Notes about special derivatives</a><a id="Notes-about-special-derivatives-1"></a><a class="docs-heading-anchor-permalink" href="#Notes-about-special-derivatives" title="Permalink"></a></h2><p>The derivative of <code>|u|</code> is <code>u/|u|</code> which is NaN when <code>u==0</code>. This is not a bug. The derivative of the absolute value function is undefined at 0 and the way <strong>FD</strong> signals this is by returning NaN.</p><h2 id="Conditionals"><a class="docs-heading-anchor" href="#Conditionals">Conditionals</a><a id="Conditionals-1"></a><a class="docs-heading-anchor-permalink" href="#Conditionals" title="Permalink"></a></h2><p>As of version 0.4.1 <strong>FD</strong> allows you to create expressions with conditionals using either the builtin <code>ifelse</code> function or a new function <code>if_else</code>. <code>ifelse</code> will evaluate both inputs. By contrast <code>if_else</code> has the semantics of <code>if...else...end</code>; only the true or false branch will be executed. This is useful when your conditional is used to prevent exceptions because of illegal input values:</p><pre><code class="language-julia hljs">julia&gt; f = if_else(x&lt;0,NaN,sqrt(x))
(if_else  (x &lt; 0) NaN sqrt(x))

julia&gt; g = make_function([f],[x])


julia&gt; g([-1])
1-element Vector{Float64}:
 NaN

julia&gt; g([2.0])
1-element Vector{Float64}:
 1.4142135623730951
end</code></pre><p>In this case you wouldn&#39;t want to use <code>ifelse</code> because it evaluates both the true and false branches and causes a runtime exception:</p><pre><code class="language-julia hljs">julia&gt; f = ifelse(x&lt;0,NaN,sqrt(x))
(ifelse  (x &lt; 0) NaN sqrt(x))

julia&gt; g = make_function([f],[x])
...

julia&gt; g([-1])
ERROR: DomainError with -1.0:
sqrt was called with a negative real argument but will only return a complex result if called with a complex argument. Try sqrt(Complex(x)).</code></pre><p>However, you cannot yet compute derivatives of expressions that contain conditionals:</p><pre><code class="language-julia hljs">julia&gt; jacobian([f],[x,y])
ERROR: Your expression contained ifelse. FastDifferentiation does not yet support differentiation through ifelse or any of these conditionals (max, min, copysign, &amp;, |, xor, &lt;, &gt;, &lt;=, &gt;=, !=, ==, signbit, isreal, iszero, isfinite, isnan, isinf, isinteger, !)</code></pre><p>This may be a breaking change for some users. In previous versions the expression <code>x==y</code> returned a <code>Bool</code>. Some data structures, such as <code>Dict</code> use <code>==</code> by default to determine if two entries are the same. This will no longer work since <code>x==y</code> will now return an expression graph. Use an <code>IdDict</code> instead since this uses <code>===</code>.</p><p>A future PR will add support for differentiating through conditionals.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="limitations/">Limitations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 14 February 2025 18:39">Friday 14 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
